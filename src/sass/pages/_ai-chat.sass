@use '../utils/mixins' as mixins
@use '../utils/variables' as variables

.chat-container
    margin: 0 auto
    height: 100vh
    background: url('/assets/images/chat-bg.png') #0D1418
    position: relative
    display: flex
    flex-direction: column

// Chat Header
.chat-header
    background: #1F2C34
    padding: 0.6rem
    @include mixins.flexbox
    align-items: center
    position: sticky
    top: 0
    z-index: 100

    .header-content
        @include mixins.flexbox
        @include mixins.justify-content(space-between)
        align-items: center
        width: 100%

        .left-section
            @include mixins.flexbox
            align-items: center
            gap: 1rem

            .back-button
                color: #8696A0
                font-size: 1.2rem
                text-decoration: none

            .profile-info
                @include mixins.flexbox
                align-items: center
                gap: 0.8rem

                .profile-image
                    width: 40px
                    height: 40px
                    background: #00A884
                    border-radius: 50%
                    @include mixins.flex-center

                    i
                        color: #fff
                        font-size: 1.4rem

                .profile-details
                    h2
                        color: #E9EDEF
                        font-size: 1rem
                        font-weight: 500

                    .status
                        color: #8696A0
                        font-size: 0.8rem

        .right-section
            @include mixins.flexbox
            gap: 1.5rem

            .header-icon
                background: none
                border: none
                color: #8696A0
                font-size: 1.2rem
                cursor: pointer
                position: relative

            .dropdown
                position: relative

                .dropdown-menu
                    display: none
                    position: absolute
                    top: 100%
                    right: 0
                    background: #1F2C34
                    border-radius: 8px
                    min-width: 200px
                    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3)
                    z-index: 1000
                    margin-top: 0.5rem

                    &.show
                        display: block
                        animation: fadeIn 0.2s ease

                .dropdown-item
                    display: flex
                    align-items: center
                    gap: 0.8rem
                    padding: 0.8rem 1rem
                    color: #E9EDEF
                    text-decoration: none
                    transition: background 0.2s ease

                    i
                        font-size: 1.1rem
                        width: 20px
                        text-align: center

                    &:hover
                        background: rgba(134, 150, 160, 0.1)

                    &.text-danger
                        color: #FF4D4D

                .dropdown-divider
                    height: 1px
                    background: rgba(134, 150, 160, 0.1)
                    margin: 0.5rem 0

// Chat Messages
.chat-messages
    flex: 1
    padding: 1rem
    overflow-y: auto

    .message-date
        text-align: center
        color: #8696A0
        font-size: 0.8rem
        margin: 1rem 0
        text-transform: uppercase

    .message
        margin-bottom: 0.8rem
        @include mixins.flexbox
        max-width: 85%

        &.user-message
            margin-left: auto
            justify-content: flex-end

            .message-content
                background: #005C4B
                border-radius: 8px 0 8px 8px

        &.ai-message
            margin-right: auto
            justify-content: flex-start

            .message-content
                background: #1F2C34
                border-radius: 0 8px 8px 8px

        .message-content
            padding: 0.6rem 1rem
            color: #E9EDEF
            position: relative

            p
                margin-bottom: 0.4rem
                line-height: 1.4

            .message-time
                font-size: 0.7rem
                color: #8696A0
                display: block
                text-align: right
                margin-top: 0.2rem

            &.voice-message
                @include mixins.flexbox
                align-items: center
                gap: 1rem
                min-width: 180px

                .fa-play
                    color: #00A884
                    cursor: pointer

                .voice-wave
                    flex: 1
                    height: 20px
                    background: linear-gradient(#8696A0 50%, transparent 50%)
                    background-size: 4px 4px
                    opacity: 0.5

                .voice-duration
                    color: #8696A0
                    font-size: 0.8rem

            &.document-message
                @include mixins.flexbox
                align-items: center
                gap: 1rem
                min-width: 200px

                .fa-file-pdf
                    color: #00A884
                    font-size: 1.5rem

                .document-info
                    @include mixins.flexbox
                    flex-direction: column

                    .document-name
                        font-size: 0.9rem

                    .document-size
                        font-size: 0.8rem
                        color: #8696A0

            .options-list
                list-style: none
                margin: 0.8rem 0

                li
                    background: rgba(134, 150, 160, 0.1)
                    padding: 0.5rem 1rem
                    border-radius: 4px
                    margin-bottom: 0.5rem
                    cursor: pointer
                    transition: background 0.3s ease

                    &:hover
                        background: rgba(134, 150, 160, 0.2)

            .start-assessment-btn
                display: inline-flex
                align-items: center
                gap: 0.5rem
                background: #00A884
                color: #fff
                border: none
                padding: 0.8rem 1.5rem
                border-radius: 8px
                font-size: 1rem
                margin-top: 1rem
                cursor: pointer
                transition: all 0.3s ease

                &:hover
                    transform: translateY(-2px)
                    background: darken(#00A884, 5%)

// Chat Input
.chat-input
    background: #1F2C34
    padding: 0.8rem
    position: sticky
    bottom: 0

    .input-container
        @include mixins.flexbox
        align-items: center
        gap: 0.8rem

        .attachment-btn, .voice-btn, .emoji-btn
            background: none
            border: none
            color: #8696A0
            font-size: 1.4rem
            cursor: pointer
            padding: 0.5rem

        .input-wrapper
            flex: 1
            background: #2A3942
            border-radius: 8px
            @include mixins.flexbox
            align-items: center
            padding: 0 1rem

            .message-input
                flex: 1
                background: none
                border: none
                color: #E9EDEF
                padding: 0.8rem 0
                outline: none

                &::placeholder
                    color: #8696A0

// Upload Modal
.upload-modal
    position: fixed
    bottom: 0
    left: 0
    right: 0
    background: #1F2C34
    border-radius: 20px 20px 0 0
    padding: 1.5rem
    z-index: 1000
    max-width: 480px
    margin: 0 auto
    transform: translateY(100%)
    transition: transform 0.3s ease

    &.show
        transform: translateY(0)

    .upload-options
        display: grid
        grid-template-columns: repeat(4, 1fr)
        gap: 1rem
        text-align: center

        .upload-option
            background: none
            border: none
            color: #E9EDEF
            cursor: pointer

            i
                font-size: 1.5rem
                color: #00A884
                margin-bottom: 0.5rem
                display: block

            span
                font-size: 0.8rem

// Onboarding Modal
.onboarding-modal
    display: none
    position: fixed
    top: 0
    left: 0
    width: 100%
    height: 100%
    background: rgba(0, 0, 0, 0.9)
    z-index: 1000
    opacity: 0
    transition: opacity 0.3s ease

    &.show
        display: flex
        align-items: center
        justify-content: center
        opacity: 1

    .onboarding-content
        background: #1A1D21
        border-radius: 24px
        width: 90%
        max-width: 380px
        height: 400px
        padding: 2rem 1.5rem
        position: relative
        overflow: hidden

        .onboarding-step
            text-align: center
            position: absolute
            width: calc(100% - 3rem)
            left: 1.5rem
            top: 2rem
            padding: 0
            transform: translateX(100%)
            opacity: 0
            visibility: hidden
            display: block
            transition: all 0.3s ease

            h2
                color: #E9EDEF
                font-size: 1.5rem
                margin-bottom: 2rem
                font-weight: 500

            .options-grid
                display: grid
                gap: 1rem
                margin-bottom: 2rem
                grid-template-columns: repeat(2, 2fr)
                gap: 1.5rem

                .option-btn
                    background: #2A3942
                    border: none
                    padding: 1.5rem 1rem
                    border-radius: 12px
                    color: #E9EDEF
                    cursor: pointer
                    transition: all 0.3s ease
                    display: flex
                    flex-direction: column
                    align-items: center
                    gap: 0.8rem

                    i
                        font-size: 1.5rem
                        color: #00A884

                    .score
                        font-size: 1.5rem
                        font-weight: 600
                        color: #00A884

                    .label
                        font-size: 0.9rem
                        color: rgba(233, 237, 239, 0.7)

                    &:hover
                        transform: translateY(-3px)
                        background: #374750

                    &.selected
                        background: #00A884
                        
                        i, .score
                            color: #fff

                        .label
                            color: rgba(255, 255, 255, 0.9)

            &.active
                transform: translateX(0)
                opacity: 1
                visibility: visible
                display: block

        .progress-dots
            position: absolute
            bottom: 2rem
            left: 0
            right: 0
            display: flex
            justify-content: center
            gap: 1rem
            margin-top: 1rem

            .dot
                width: 12px
                height: 12px
                border-radius: 50%
                background: rgba(233, 237, 239, 0.1)
                transition: all 0.3s ease
                cursor: default
                opacity: 0.5

                &.active
                    background: #00A884
                    transform: scale(1.2)
                    opacity: 1
                    cursor: pointer

                &.completed
                    background: #007d63
                    opacity: 0.9
                    cursor: pointer

                &:hover
                    transform: scale(1.1)
                    opacity: 0.8
                    &:not(.active):not(.completed)
                        opacity: 0.3
                        transform: none
                        cursor: not-allowed

@keyframes slideNext
    from
        transform: translateX(100%)
    to
        transform: translateX(0)

@keyframes slidePrev
    from
        transform: translateX(-100%)
    to
        transform: translateX(0)

@keyframes slideOutNext
    from
        transform: translateX(0)
    to
        transform: translateX(-100%)

@keyframes slideOutPrev
    from
        transform: translateX(0)
    to
        transform: translateX(100%)

@keyframes slideIn
    from
        opacity: 0
        transform: translateY(20px)
    to
        opacity: 1
        transform: translateY(0)

@keyframes fadeIn
    from
        opacity: 0
        transform: translateY(-10px)
    to
        opacity: 1
        transform: translateY(0)

@keyframes slideUp
    from
        opacity: 0
        transform: translateY(20px)
    to
        opacity: 1
        transform: translateY(0)

.message
    animation: slideIn 0.3s ease forwards 